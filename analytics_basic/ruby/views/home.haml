%head
	%title BigCommerce analytics app in ruby
	%link{:href => 'http://twitter.github.com/bootstrap/assets/css/bootstrap.css', :rel=>'stylesheet'}
	%link{:href => 'app.css', :rel=> 'stylesheet'}
	%link{:href => 'style.css', :rel => 'stylesheet'}
	%script{:src => 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'}
	%script{:src => 'http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/js/bootstrap.min.js'}
	
%div.navbar.navbar-inverse.navbar-fixed-top
	%div.navbar-inner
		%div.container
			%div.nav-collapse.collapse
				%ul.nav

%div.container
	%br/
	%br/
	%h2 BigCommerce Example App - Analytics
	%p.lead 
		Get store data
		%span.badge ruby
		%span.badge api v2
	
	%form#apiform
		%label{:for=>'name'} User Name
		%input{:id=>'name', :type=>'text',:placeholder=>'testuser'}
		%label{:for=>'key'} API key
		%input{:id=>'key', :type=>'text',:placeholder=>'567df000b3e5c0a203f42666531e16ed'}
		%label{:for=>'url'} Store URL
		%input{:id=>'url', :type=>'text',:placeholder=>'https://store-bwvr466.mybigcommerce.com/'}
		%br
		%a{:id=>"apisubmit",:class=>"btn"} submit

:javascript
	$('#apisubmit').click(function(){
		$.ajax('/load',{
				type: 'POST',
				data: { name: $('input#name').attr("value"), key: $('input#key').attr("value"), url:$('input#url').attr("value") },
				success: function(){ console.log("using these keys for the current session");
														document.location.href = '/dashboard'; },
				error: function(){ console.log("something broke! cannot update the keys") }
			});
		})